[2025-09-16 20:41:37] ğŸš€ Starting PayPal Clone Ecosystem Test Suite
[2025-09-16 20:41:37] ==============================================
[2025-09-16 20:41:37] 
[2025-09-16 20:41:37] ğŸ¥ STEP 1: Health Checks
[2025-09-16 20:41:37] ========================
[2025-09-16 20:41:37] ğŸ”„ API Call: GET /auth/health
[2025-09-16 20:41:37] ğŸ“¥ Response: 
[2025-09-16 20:41:38] ğŸ”„ API Call: GET /payment/health
[2025-09-16 20:41:38] ğŸ“¥ Response: {"status":"healthy","service":"payment-service","timestamp":"2025-09-16T15:11:38.954Z"}
[2025-09-16 20:41:39] ğŸ”„ API Call: GET /notification/health
[2025-09-16 20:41:40] ğŸ“¥ Response: {"status":"healthy","service":"notification-service","timestamp":"2025-09-16T15:11:40.000Z"}
[2025-09-16 20:41:42] 
[2025-09-16 20:41:42] ğŸ‘¤ STEP 2: User Registration
[2025-09-16 20:41:42] ============================
[2025-09-16 20:41:42] ğŸ“ Registering user: alice@paypal.com
[2025-09-16 20:41:42] ğŸ”„ API Call: POST /auth/register
[2025-09-16 20:41:42] ğŸ“¥ Response: {"message":"User registered successfully","userId":1758035502235}
[2025-09-16 20:41:43] ğŸ“ Registering user: bob@paypal.com
[2025-09-16 20:41:43] ğŸ”„ API Call: POST /auth/register
[2025-09-16 20:41:43] ğŸ“¥ Response: {"message":"User registered successfully","userId":1758035503405}
[2025-09-16 20:41:44] ğŸ“ Registering user: charlie@paypal.com
[2025-09-16 20:41:44] ğŸ”„ API Call: POST /auth/register
[2025-09-16 20:41:44] ğŸ“¥ Response: {"message":"User registered successfully","userId":1758035504576}
[2025-09-16 20:41:45] 
[2025-09-16 20:41:45] ğŸ” STEP 3: User Login
[2025-09-16 20:41:45] =====================
[2025-09-16 20:41:45] ğŸ”‘ Logging in user: alice@paypal.com
[2025-09-16 20:41:45] ğŸ”„ API Call: POST /auth/login
[2025-09-16 20:41:45] ğŸ“¥ Response: {"token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOjE3NTgwMzU1MDIyMzUsImVtYWlsIjoiYWxpY2VAcGF5cGFsLmNvbSIsImlhdCI6MTc1ODAzNTUwNSwiZXhwIjoxNzU4MTIxOTA1fQ.qK1SXH9L18cxeAUZydlFtqj0qRsqF5xJ5jPBtdI73OI","userId":1758035502235}
[2025-09-16 20:41:46] ğŸ”‘ Logging in user: bob@paypal.com
[2025-09-16 20:41:46] ğŸ”„ API Call: POST /auth/login
[2025-09-16 20:41:46] ğŸ“¥ Response: {"token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOjE3NTgwMzU1MDM0MDUsImVtYWlsIjoiYm9iQHBheXBhbC5jb20iLCJpYXQiOjE3NTgwMzU1MDYsImV4cCI6MTc1ODEyMTkwNn0.ybh1E6pVWzeN0NOL_Z7QatyFKsoyZMpXWSwXRmLViyw","userId":1758035503405}
[2025-09-16 20:41:47] ğŸ”‘ Logging in user: charlie@paypal.com
[2025-09-16 20:41:47] ğŸ”„ API Call: POST /auth/login
[2025-09-16 20:41:48] ğŸ“¥ Response: {"token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOjE3NTgwMzU1MDQ1NzYsImVtYWlsIjoiY2hhcmxpZUBwYXlwYWwuY29tIiwiaWF0IjoxNzU4MDM1NTA4LCJleHAiOjE3NTgxMjE5MDh9.yiCTau9pmgiqpGd91-SfZiTT5RvZGr5bMLMr57ZElDU","userId":1758035504576}
[2025-09-16 20:41:49] 
[2025-09-16 20:41:49] âœ… STEP 4: Token Verification
[2025-09-16 20:41:49] =============================
[2025-09-16 20:41:49] ğŸ« Verifying token for alice@paypal.com
[2025-09-16 20:41:49] ğŸ”„ API Call: POST /auth/verify
[2025-09-16 20:41:49] ğŸ“¥ Response: <!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Error</title>
</head>
<body>
<pre>SyntaxError: Unexpected token <br> in JSON at position 205<br> &nbsp; &nbsp;at JSON.parse (&lt;anonymous&gt;)<br> &nbsp; &nbsp;at parse (/app/node_modules/body-parser/lib/types/json.js:92:19)<br> &nbsp; &nbsp;at /app/node_modules/body-parser/lib/read.js:128:18<br> &nbsp; &nbsp;at AsyncResource.runInAsyncScope (node:async_hooks:203:9)<br> &nbsp; &nbsp;at invokeCallback (/app/node_modules/raw-body/index.js:238:16)<br> &nbsp; &nbsp;at done (/app/node_modules/raw-body/index.js:227:7)<br> &nbsp; &nbsp;at IncomingMessage.onEnd (/app/node_modules/raw-body/index.js:287:7)<br> &nbsp; &nbsp;at IncomingMessage.emit (node:events:525:35)<br> &nbsp; &nbsp;at endReadableNT (node:internal/streams/readable:1358:12)<br> &nbsp; &nbsp;at processTicksAndRejections (node:internal/process/task_queues:83:21)</pre>
</body>
</html>
[2025-09-16 20:41:50] ğŸ« Verifying token for bob@paypal.com
[2025-09-16 20:41:50] ğŸ”„ API Call: POST /auth/verify
[2025-09-16 20:41:50] ğŸ“¥ Response: <!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Error</title>
</head>
<body>
<pre>SyntaxError: Unexpected token <br> in JSON at position 202<br> &nbsp; &nbsp;at JSON.parse (&lt;anonymous&gt;)<br> &nbsp; &nbsp;at parse (/app/node_modules/body-parser/lib/types/json.js:92:19)<br> &nbsp; &nbsp;at /app/node_modules/body-parser/lib/read.js:128:18<br> &nbsp; &nbsp;at AsyncResource.runInAsyncScope (node:async_hooks:203:9)<br> &nbsp; &nbsp;at invokeCallback (/app/node_modules/raw-body/index.js:238:16)<br> &nbsp; &nbsp;at done (/app/node_modules/raw-body/index.js:227:7)<br> &nbsp; &nbsp;at IncomingMessage.onEnd (/app/node_modules/raw-body/index.js:287:7)<br> &nbsp; &nbsp;at IncomingMessage.emit (node:events:525:35)<br> &nbsp; &nbsp;at endReadableNT (node:internal/streams/readable:1358:12)<br> &nbsp; &nbsp;at processTicksAndRejections (node:internal/process/task_queues:83:21)</pre>
</body>
</html>
[2025-09-16 20:41:51] ğŸ« Verifying token for charlie@paypal.com
[2025-09-16 20:41:51] ğŸ”„ API Call: POST /auth/verify
[2025-09-16 20:41:51] ğŸ“¥ Response: <!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Error</title>
</head>
<body>
<pre>SyntaxError: Unexpected token <br> in JSON at position 207<br> &nbsp; &nbsp;at JSON.parse (&lt;anonymous&gt;)<br> &nbsp; &nbsp;at parse (/app/node_modules/body-parser/lib/types/json.js:92:19)<br> &nbsp; &nbsp;at /app/node_modules/body-parser/lib/read.js:128:18<br> &nbsp; &nbsp;at AsyncResource.runInAsyncScope (node:async_hooks:203:9)<br> &nbsp; &nbsp;at invokeCallback (/app/node_modules/raw-body/index.js:238:16)<br> &nbsp; &nbsp;at done (/app/node_modules/raw-body/index.js:227:7)<br> &nbsp; &nbsp;at IncomingMessage.onEnd (/app/node_modules/raw-body/index.js:287:7)<br> &nbsp; &nbsp;at IncomingMessage.emit (node:events:525:35)<br> &nbsp; &nbsp;at endReadableNT (node:internal/streams/readable:1358:12)<br> &nbsp; &nbsp;at processTicksAndRejections (node:internal/process/task_queues:83:21)</pre>
</body>
</html>
[2025-09-16 20:41:52] 
[2025-09-16 20:41:52] ğŸ’³ STEP 5: Payment Processing
[2025-09-16 20:41:52] =============================
[2025-09-16 20:41:52] ğŸ’° Processing payment: 50.00 to john@example.com
[2025-09-16 20:41:52] ğŸ”„ API Call: POST /payment/process
[2025-09-16 20:41:56] ğŸ“¥ Response: {"error":"No token provided"}
[2025-09-16 20:41:58] ğŸ’° Processing payment: 150.75 to sarah@store.com
[2025-09-16 20:41:58] ğŸ”„ API Call: POST /payment/process
[2025-09-16 20:42:02] ğŸ“¥ Response: {"error":"No token provided"}
[2025-09-16 20:42:04] ğŸ’° Processing payment: 25.50 to mike@restaurant.com
[2025-09-16 20:42:04] ğŸ”„ API Call: POST /payment/process
[2025-09-16 20:42:08] ğŸ“¥ Response: {"error":"No token provided"}
[2025-09-16 20:42:10] ğŸ’° Processing payment: 300.00 to landlord@apartments.com
[2025-09-16 20:42:10] ğŸ”„ API Call: POST /payment/process
[2025-09-16 20:42:13] ğŸ“¥ Response: {"error":"No token provided"}
[2025-09-16 20:42:15] ğŸ’° Processing payment: 75.25 to utilities@company.com
[2025-09-16 20:42:15] ğŸ”„ API Call: POST /payment/process
[2025-09-16 20:42:19] ğŸ“¥ Response: {"error":"No token provided"}
[2025-09-16 20:42:21] 
[2025-09-16 20:42:21] ğŸ“Š STEP 6: Payment History
[2025-09-16 20:42:21] ==========================
[2025-09-16 20:42:21] ğŸ“ˆ Fetching payment history
[2025-09-16 20:42:21] ğŸ”„ API Call: GET /payment/history
[2025-09-16 20:42:25] ğŸ“¥ Response: {"error":"No token provided"}
[2025-09-16 20:42:25] 
[2025-09-16 20:42:25] âŒ STEP 7: Error Scenarios
[2025-09-16 20:42:25] ==========================
[2025-09-16 20:42:25] ğŸš« Testing invalid login
[2025-09-16 20:42:25] ğŸ”„ API Call: POST /auth/login
[2025-09-16 20:42:25] ğŸ“¥ Response: {"error":"Invalid credentials"}
[2025-09-16 20:42:26] ğŸš« Testing payment without token
[2025-09-16 20:42:26] ğŸ”„ API Call: POST /payment/process
[2025-09-16 20:42:26] ğŸ“¥ Response: {"error":"No token provided"}
[2025-09-16 20:42:27] ğŸš« Testing invalid token
[2025-09-16 20:42:27] ğŸ”„ API Call: POST /payment/process
[2025-09-16 20:42:31] ğŸ“¥ Response: {"error":"No token provided"}
[2025-09-16 20:42:32] 
[2025-09-16 20:42:32] ğŸ”„ STEP 8: Inter-Service Communication
[2025-09-16 20:42:32] ======================================
[2025-09-16 20:42:32] ğŸ¯ Testing complete flow: Auth â†’ Payment â†’ Notification
[2025-09-16 20:42:32] ğŸ”„ API Call: POST /payment/process
[2025-09-16 20:42:36] ğŸ“¥ Response: {"error":"No token provided"}
[2025-09-16 20:42:36] 
[2025-09-16 20:42:36] âœ… ECOSYSTEM TEST COMPLETED
[2025-09-16 20:42:36] ============================
[2025-09-16 20:42:36] ğŸ“Š Total API calls made: 22
[2025-09-16 20:42:36] ğŸ“ Log file saved: logs/ecosystem-20250916-204137.log
[2025-09-16 20:42:36] 
[2025-09-16 20:42:36] ğŸ³ Docker container logs:
[2025-09-16 20:42:36]   - docker-compose logs auth-service
[2025-09-16 20:42:36]   - docker-compose logs payment-service
[2025-09-16 20:42:36]   - docker-compose logs notification-service
[2025-09-16 20:42:36]   - docker-compose logs api-gateway
