[2025-09-17 22:27:59] 🚀 Starting PayPal Clone Ecosystem Test Suite
[2025-09-17 22:27:59] ==============================================
[2025-09-17 22:27:59] 
[2025-09-17 22:27:59] 🏥 STEP 1: Health Checks
[2025-09-17 22:27:59] ========================
[2025-09-17 22:27:59] 🔄 API Call: GET http://localhost:8080/api/auth/health
[2025-09-17 22:27:59] 📥 Response: {"status":"healthy","service":"auth-service","timestamp":"2025-09-17T16:57:59.447Z"}
[2025-09-17 22:28:00] 🔄 API Call: GET http://localhost:8080/api/payment/health
[2025-09-17 22:28:00] 📥 Response: {"status":"healthy","service":"payment-service","timestamp":"2025-09-17T16:58:00.481Z"}
[2025-09-17 22:28:01] 🔄 API Call: GET http://localhost:8080/api/notification/health
[2025-09-17 22:28:01] 📥 Response: {"status":"healthy","service":"notification-service","timestamp":"2025-09-17T16:58:01.515Z"}
[2025-09-17 22:28:03] 
[2025-09-17 22:28:03] 👤 STEP 2: User Registration
[2025-09-17 22:28:03] ============================
[2025-09-17 22:28:03] 📝 Registering user: alice@paypal.com
[2025-09-17 22:28:03] 🔄 API Call: POST http://localhost:8080/api/auth/register
[2025-09-17 22:28:03] 📥 Response: {"message":"User registered successfully","userId":1758128283869}
[2025-09-17 22:28:04] 📝 Registering user: bob@paypal.com
[2025-09-17 22:28:04] 🔄 API Call: POST http://localhost:8080/api/auth/register
[2025-09-17 22:28:05] 📥 Response: {"message":"User registered successfully","userId":1758128285219}
[2025-09-17 22:28:06] 📝 Registering user: charlie@paypal.com
[2025-09-17 22:28:06] 🔄 API Call: POST http://localhost:8080/api/auth/register
[2025-09-17 22:28:06] 📥 Response: {"message":"User registered successfully","userId":1758128286564}
[2025-09-17 22:28:07] 
[2025-09-17 22:28:07] 🔐 STEP 3: User Login
[2025-09-17 22:28:07] =====================
[2025-09-17 22:28:07] 🔑 Logging in user: alice@paypal.com
[2025-09-17 22:28:07] 🔄 API Call: POST http://localhost:8080/api/auth/login
[2025-09-17 22:28:07] 📥 Response: {"token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOjE3NTgxMjc5NTM0NTAsImVtYWlsIjoiYWxpY2VAcGF5cGFsLmNvbSIsImlhdCI6MTc1ODEyODI4NywiZXhwIjoxNzU4MjE0Njg3fQ.r9oisC-SEU11Btps2eiAR9U8MB1dpipMNOI2ovRAa_c","userId":1758127953450}
[2025-09-17 22:28:07] ✅ Token extracted successfully for alice@paypal.com
[2025-09-17 22:28:07] 🔒 Token details: eyJhbGciOiJIUzI1NiIs...
[2025-09-17 22:28:07] 🔑 Verifying token immediately after login
[2025-09-17 22:28:07] 🔄 API Call: POST http://localhost:8080/api/auth/verify
[2025-09-17 22:28:07] 📥 Response: {"valid":false,"error":"Invalid token","details":"jwt malformed"}
[2025-09-17 22:28:08] 🔑 Logging in user: bob@paypal.com
[2025-09-17 22:28:08] 🔄 API Call: POST http://localhost:8080/api/auth/login
[2025-09-17 22:28:09] 📥 Response: {"token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOjE3NTgxMjc5NTQ3NzksImVtYWlsIjoiYm9iQHBheXBhbC5jb20iLCJpYXQiOjE3NTgxMjgyODksImV4cCI6MTc1ODIxNDY4OX0.0uIyCbKDCAWlGrohH3Ljj0Ct1Tqpgk-FGWn2AHH8LxE","userId":1758127954779}
[2025-09-17 22:28:09] ✅ Token extracted successfully for bob@paypal.com
[2025-09-17 22:28:09] 🔒 Token details: eyJhbGciOiJIUzI1NiIs...
[2025-09-17 22:28:09] 🔑 Verifying token immediately after login
[2025-09-17 22:28:09] 🔄 API Call: POST http://localhost:8080/api/auth/verify
[2025-09-17 22:28:09] 📥 Response: {"valid":false,"error":"Invalid token","details":"jwt malformed"}
[2025-09-17 22:28:10] 🔑 Logging in user: charlie@paypal.com
[2025-09-17 22:28:10] 🔄 API Call: POST http://localhost:8080/api/auth/login
[2025-09-17 22:28:10] 📥 Response: {"token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOjE3NTgxMjc5NTYxMjcsImVtYWlsIjoiY2hhcmxpZUBwYXlwYWwuY29tIiwiaWF0IjoxNzU4MTI4MjkwLCJleHAiOjE3NTgyMTQ2OTB9.5S_r218p9tVVvr_IUCaq5GlnbmD2ULiHvWFuvYrtL7A","userId":1758127956127}
[2025-09-17 22:28:10] ✅ Token extracted successfully for charlie@paypal.com
[2025-09-17 22:28:10] 🔒 Token details: eyJhbGciOiJIUzI1NiIs...
[2025-09-17 22:28:10] 🔑 Verifying token immediately after login
[2025-09-17 22:28:10] 🔄 API Call: POST http://localhost:8080/api/auth/verify
[2025-09-17 22:28:10] 📥 Response: {"valid":false,"error":"Invalid token","details":"jwt malformed"}
[2025-09-17 22:28:11] 
[2025-09-17 22:28:11] ✅ STEP 4: Token Verification
[2025-09-17 22:28:11] =============================
[2025-09-17 22:28:11] 🎫 Verifying token for alice@paypal.com
[2025-09-17 22:28:11] 🔄 API Call: POST http://localhost:8080/api/auth/verify
[2025-09-17 22:28:11] 📥 Response: {"valid":false,"error":"Invalid token","details":"jwt malformed"}
[2025-09-17 22:28:12] 🎫 Verifying token for bob@paypal.com
[2025-09-17 22:28:12] 🔄 API Call: POST http://localhost:8080/api/auth/verify
[2025-09-17 22:28:12] 📥 Response: {"valid":false,"error":"Invalid token","details":"jwt malformed"}
[2025-09-17 22:28:13] 🎫 Verifying token for charlie@paypal.com
[2025-09-17 22:28:13] 🔄 API Call: POST http://localhost:8080/api/auth/verify
[2025-09-17 22:28:13] 📥 Response: {"valid":false,"error":"Invalid token","details":"jwt malformed"}
[2025-09-17 22:28:14] 
[2025-09-17 22:28:14] 💳 STEP 5: Payment Processing
[2025-09-17 22:28:14] =============================
[2025-09-17 22:28:14] 💰 Processing payment: 50.00 to john@example.com
[2025-09-17 22:28:14] 🔄 API Call: POST http://localhost:8080/api/payment/process
[2025-09-17 22:28:14] 📥 Response: {"error":"Invalid token"}
[2025-09-17 22:28:16] 💰 Processing payment: 150.75 to sarah@store.com
[2025-09-17 22:28:16] 🔄 API Call: POST http://localhost:8080/api/payment/process
[2025-09-17 22:28:17] 📥 Response: {"error":"Invalid token"}
[2025-09-17 22:28:19] 💰 Processing payment: 25.50 to mike@restaurant.com
[2025-09-17 22:28:19] 🔄 API Call: POST http://localhost:8080/api/payment/process
[2025-09-17 22:28:19] 📥 Response: {"error":"Invalid token"}
[2025-09-17 22:28:21] 💰 Processing payment: 300.00 to landlord@apartments.com
[2025-09-17 22:28:21] 🔄 API Call: POST http://localhost:8080/api/payment/process
[2025-09-17 22:28:21] 📥 Response: {"error":"Invalid token"}
[2025-09-17 22:28:23] 💰 Processing payment: 75.25 to utilities@company.com
[2025-09-17 22:28:23] 🔄 API Call: POST http://localhost:8080/api/payment/process
[2025-09-17 22:28:23] 📥 Response: {"error":"Invalid token"}
[2025-09-17 22:28:25] 💰 Processing payment: 50.00 to john@example.com
[2025-09-17 22:28:25] 🔄 API Call: POST http://localhost:8080/api/payment/process
[2025-09-17 22:28:25] 📥 Response: {"error":"Invalid token"}
[2025-09-17 22:28:27] 💰 Processing payment: 150.75 to sarah@store.com
[2025-09-17 22:28:27] 🔄 API Call: POST http://localhost:8080/api/payment/process
[2025-09-17 22:28:27] 📥 Response: {"error":"Invalid token"}
[2025-09-17 22:28:29] 💰 Processing payment: 25.50 to mike@restaurant.com
[2025-09-17 22:28:29] 🔄 API Call: POST http://localhost:8080/api/payment/process
[2025-09-17 22:28:29] 📥 Response: {"error":"Invalid token"}
[2025-09-17 22:28:31] 💰 Processing payment: 300.00 to landlord@apartments.com
[2025-09-17 22:28:31] 🔄 API Call: POST http://localhost:8080/api/payment/process
[2025-09-17 22:28:31] 📥 Response: {"error":"Invalid token"}
[2025-09-17 22:28:33] 💰 Processing payment: 75.25 to utilities@company.com
[2025-09-17 22:28:33] 🔄 API Call: POST http://localhost:8080/api/payment/process
[2025-09-17 22:28:33] 📥 Response: {"error":"Invalid token"}
[2025-09-17 22:28:35] 💰 Processing payment: 50.00 to john@example.com
[2025-09-17 22:28:35] 🔄 API Call: POST http://localhost:8080/api/payment/process
[2025-09-17 22:28:35] 📥 Response: {"error":"Invalid token"}
[2025-09-17 22:28:37] 💰 Processing payment: 150.75 to sarah@store.com
[2025-09-17 22:28:37] 🔄 API Call: POST http://localhost:8080/api/payment/process
[2025-09-17 22:28:37] 📥 Response: {"error":"Invalid token"}
[2025-09-17 22:28:39] 💰 Processing payment: 25.50 to mike@restaurant.com
[2025-09-17 22:28:39] 🔄 API Call: POST http://localhost:8080/api/payment/process
[2025-09-17 22:28:39] 📥 Response: {"error":"Invalid token"}
[2025-09-17 22:28:41] 💰 Processing payment: 300.00 to landlord@apartments.com
[2025-09-17 22:28:41] 🔄 API Call: POST http://localhost:8080/api/payment/process
[2025-09-17 22:28:41] 📥 Response: {"error":"Invalid token"}
[2025-09-17 22:28:43] 💰 Processing payment: 75.25 to utilities@company.com
[2025-09-17 22:28:43] 🔄 API Call: POST http://localhost:8080/api/payment/process
[2025-09-17 22:28:43] 📥 Response: {"error":"Invalid token"}
[2025-09-17 22:28:45] 
[2025-09-17 22:28:45] 📊 STEP 6: Payment History
[2025-09-17 22:28:45] ==========================
[2025-09-17 22:28:45] 📈 Fetching payment history
[2025-09-17 22:28:45] 🔄 API Call: GET http://localhost:8080/api/payment/history
[2025-09-17 22:28:45] 📥 Response: {"error":"Invalid token"}
[2025-09-17 22:28:45] 
[2025-09-17 22:28:45] ❌ STEP 7: Error Scenarios
[2025-09-17 22:28:45] ==========================
[2025-09-17 22:28:45] 🚫 Testing invalid login
[2025-09-17 22:28:45] 🔄 API Call: POST http://localhost:8080/api/auth/login
[2025-09-17 22:28:45] 📥 Response: {"error":"Invalid credentials"}
[2025-09-17 22:28:46] 🚫 Testing payment without token
[2025-09-17 22:28:46] 🔄 API Call: POST http://localhost:8080/api/payment/process
[2025-09-17 22:28:46] 📥 Response: {"error":"No token provided"}
[2025-09-17 22:28:47] 🚫 Testing invalid token
[2025-09-17 22:28:47] 🔄 API Call: POST http://localhost:8080/api/payment/process
[2025-09-17 22:28:47] 📥 Response: {"error":"Invalid token"}
[2025-09-17 22:28:48] 
[2025-09-17 22:28:48] 🔄 STEP 8: Inter-Service Communication
[2025-09-17 22:28:48] ======================================
[2025-09-17 22:28:48] 🎯 Testing complete flow: Auth → Payment → Notification
[2025-09-17 22:28:48] 🔄 API Call: POST http://localhost:8080/api/payment/process
[2025-09-17 22:28:48] 📥 Response: {"error":"Invalid token"}
[2025-09-17 22:28:48] 
[2025-09-17 22:28:48] ✅ ECOSYSTEM TEST COMPLETED
[2025-09-17 22:28:48] ============================
[2025-09-17 22:28:48] 📊 Total API calls made: 35
[2025-09-17 22:28:48] 📝 Log file saved: logs/ecosystem-20250917-222759.log
